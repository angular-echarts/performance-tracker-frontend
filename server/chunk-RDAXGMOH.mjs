import './polyfills.server.mjs';
import{Ab as $,Ba as G,Ca as j,Da as k,Ea as v,G as w,Ib as H,J as T,L as _,M as I,Ma as h,Na as a,O as F,Oa as o,Pa as E,Q as P,Qa as f,Ra as m,Sa as c,Ta as L,Ua as N,X as U,a as M,aa as x,ba as A,c as S,ea as R,f as z,h as b,i as D,m as u,p as g,sa as s,w as y,wa as d,yb as V,zb as B}from"./chunk-KB6IUOJ6.mjs";import{g as p}from"./chunk-X2SEQXRR.mjs";var O=class{constructor(){this.subject=new b(1),this.subscriptions=new M}doFilter(i){this.subject.next(i)}dispose(){this.subscriptions.unsubscribe()}notEmpty(i,e){this.subscriptions.add(this.subject.subscribe(t=>{if(t[i]){let n=t[i].currentValue;n!=null&&e(n)}}))}has(i,e){this.subscriptions.add(this.subject.subscribe(t=>{if(t[i]){let n=t[i].currentValue;e(n)}}))}notFirst(i,e){this.subscriptions.add(this.subject.subscribe(t=>{if(t[i]&&!t[i].isFirstChange()){let n=t[i].currentValue;e(n)}}))}notFirstAndEmpty(i,e){this.subscriptions.add(this.subject.subscribe(t=>{if(t[i]&&!t[i].isFirstChange()){let n=t[i].currentValue;n!=null&&e(n)}}))}},X=new F("NGX_ECHARTS_CONFIG"),q=(()=>{class r{constructor(e,t,n){this.el=t,this.ngZone=n,this.options=null,this.theme=null,this.initOpts=null,this.merge=null,this.autoResize=!0,this.loading=!1,this.loadingType="default",this.loadingOpts=null,this.chartInit=new x,this.optionsError=new x,this.chartClick=this.createLazyEvent("click"),this.chartDblClick=this.createLazyEvent("dblclick"),this.chartMouseDown=this.createLazyEvent("mousedown"),this.chartMouseMove=this.createLazyEvent("mousemove"),this.chartMouseUp=this.createLazyEvent("mouseup"),this.chartMouseOver=this.createLazyEvent("mouseover"),this.chartMouseOut=this.createLazyEvent("mouseout"),this.chartGlobalOut=this.createLazyEvent("globalout"),this.chartContextMenu=this.createLazyEvent("contextmenu"),this.chartHighlight=this.createLazyEvent("highlight"),this.chartDownplay=this.createLazyEvent("downplay"),this.chartSelectChanged=this.createLazyEvent("selectchanged"),this.chartLegendSelectChanged=this.createLazyEvent("legendselectchanged"),this.chartLegendSelected=this.createLazyEvent("legendselected"),this.chartLegendUnselected=this.createLazyEvent("legendunselected"),this.chartLegendLegendSelectAll=this.createLazyEvent("legendselectall"),this.chartLegendLegendInverseSelect=this.createLazyEvent("legendinverseselect"),this.chartLegendScroll=this.createLazyEvent("legendscroll"),this.chartDataZoom=this.createLazyEvent("datazoom"),this.chartDataRangeSelected=this.createLazyEvent("datarangeselected"),this.chartGraphRoam=this.createLazyEvent("graphroam"),this.chartGeoRoam=this.createLazyEvent("georoam"),this.chartTreeRoam=this.createLazyEvent("treeroam"),this.chartTimelineChanged=this.createLazyEvent("timelinechanged"),this.chartTimelinePlayChanged=this.createLazyEvent("timelineplaychanged"),this.chartRestore=this.createLazyEvent("restore"),this.chartDataViewChanged=this.createLazyEvent("dataviewchanged"),this.chartMagicTypeChanged=this.createLazyEvent("magictypechanged"),this.chartGeoSelectChanged=this.createLazyEvent("geoselectchanged"),this.chartGeoSelected=this.createLazyEvent("geoselected"),this.chartGeoUnselected=this.createLazyEvent("geounselected"),this.chartAxisAreaSelected=this.createLazyEvent("axisareaselected"),this.chartBrush=this.createLazyEvent("brush"),this.chartBrushEnd=this.createLazyEvent("brushend"),this.chartBrushSelected=this.createLazyEvent("brushselected"),this.chartGlobalCursorTaken=this.createLazyEvent("globalcursortaken"),this.chartRendered=this.createLazyEvent("rendered"),this.chartFinished=this.createLazyEvent("finished"),this.animationFrameID=null,this.chart$=new b(1),this.resize$=new z,this.changeFilter=new O,this.resizeObFired=!1,this.echarts=e.echarts,this.theme=e.theme||null}ngOnChanges(e){this.changeFilter.doFilter(e)}ngOnInit(){if(!window.ResizeObserver)throw new Error("please install a polyfill for ResizeObserver");this.resizeSub=this.resize$.pipe(T(100,D,{leading:!1,trailing:!0})).subscribe(()=>this.resize()),this.autoResize&&(this.resizeOb=this.ngZone.runOutsideAngular(()=>new window.ResizeObserver(e=>{for(let t of e)t.target===this.el.nativeElement&&(this.resizeObFired?this.animationFrameID=window.requestAnimationFrame(()=>{this.resize$.next()}):this.resizeObFired=!0)})),this.resizeOb.observe(this.el.nativeElement)),this.changeFilter.notFirstAndEmpty("options",e=>this.onOptionsChange(e)),this.changeFilter.notFirstAndEmpty("merge",e=>this.setOption(e)),this.changeFilter.has("loading",e=>this.toggleLoading(!!e)),this.changeFilter.notFirst("theme",()=>this.refreshChart())}ngOnDestroy(){window.clearTimeout(this.initChartTimer),this.resizeSub&&this.resizeSub.unsubscribe(),this.animationFrameID&&window.cancelAnimationFrame(this.animationFrameID),this.resizeOb&&this.resizeOb.unobserve(this.el.nativeElement),this.loadingSub&&this.loadingSub.unsubscribe(),this.changeFilter.dispose(),this.dispose()}ngAfterViewInit(){this.initChartTimer=window.setTimeout(()=>this.initChart())}dispose(){this.chart&&(this.chart.isDisposed()||this.chart.dispose(),this.chart=null)}resize(){this.chart&&this.chart.resize()}toggleLoading(e){this.chart?e?this.chart.showLoading(this.loadingType,this.loadingOpts):this.chart.hideLoading():this.loadingSub=this.chart$.subscribe(t=>e?t.showLoading(this.loadingType,this.loadingOpts):t.hideLoading())}setOption(e,t){if(this.chart)try{this.chart.setOption(e,t)}catch(n){console.error(n),this.optionsError.emit(n)}}refreshChart(){return p(this,null,function*(){this.dispose(),yield this.initChart()})}createChart(){let e=this.el.nativeElement;if(window&&window.getComputedStyle){let t=window.getComputedStyle(e,null).getPropertyValue("height");(!t||t==="0px")&&(!e.style.height||e.style.height==="0px")&&(e.style.height="400px")}return this.ngZone.runOutsideAngular(()=>(typeof this.echarts=="function"?this.echarts:()=>Promise.resolve(this.echarts))().then(({init:n})=>n(e,this.theme,this.initOpts)))}initChart(){return p(this,null,function*(){yield this.onOptionsChange(this.options),this.merge&&this.chart&&this.setOption(this.merge)})}onOptionsChange(e){return p(this,null,function*(){e&&(this.chart?this.setOption(this.options,!0):(this.chart=yield this.createChart(),this.chart$.next(this.chart),this.chartInit.emit(this.chart),this.setOption(this.options,!0)))})}createLazyEvent(e){return this.chartInit.pipe(w(t=>new S(n=>(t.on(e,l=>this.ngZone.run(()=>n.next(l))),()=>{this.chart&&(this.chart.isDisposed()||t.off(e))}))))}static{this.\u0275fac=function(t){return new(t||r)(d(X),d(R),d(A))}}static{this.\u0275dir=k({type:r,selectors:[["echarts"],["","echarts",""]],inputs:{options:"options",theme:"theme",initOpts:"initOpts",merge:"merge",autoResize:"autoResize",loading:"loading",loadingType:"loadingType",loadingOpts:"loadingOpts"},outputs:{chartInit:"chartInit",optionsError:"optionsError",chartClick:"chartClick",chartDblClick:"chartDblClick",chartMouseDown:"chartMouseDown",chartMouseMove:"chartMouseMove",chartMouseUp:"chartMouseUp",chartMouseOver:"chartMouseOver",chartMouseOut:"chartMouseOut",chartGlobalOut:"chartGlobalOut",chartContextMenu:"chartContextMenu",chartHighlight:"chartHighlight",chartDownplay:"chartDownplay",chartSelectChanged:"chartSelectChanged",chartLegendSelectChanged:"chartLegendSelectChanged",chartLegendSelected:"chartLegendSelected",chartLegendUnselected:"chartLegendUnselected",chartLegendLegendSelectAll:"chartLegendLegendSelectAll",chartLegendLegendInverseSelect:"chartLegendLegendInverseSelect",chartLegendScroll:"chartLegendScroll",chartDataZoom:"chartDataZoom",chartDataRangeSelected:"chartDataRangeSelected",chartGraphRoam:"chartGraphRoam",chartGeoRoam:"chartGeoRoam",chartTreeRoam:"chartTreeRoam",chartTimelineChanged:"chartTimelineChanged",chartTimelinePlayChanged:"chartTimelinePlayChanged",chartRestore:"chartRestore",chartDataViewChanged:"chartDataViewChanged",chartMagicTypeChanged:"chartMagicTypeChanged",chartGeoSelectChanged:"chartGeoSelectChanged",chartGeoSelected:"chartGeoSelected",chartGeoUnselected:"chartGeoUnselected",chartAxisAreaSelected:"chartAxisAreaSelected",chartBrush:"chartBrush",chartBrushEnd:"chartBrushEnd",chartBrushSelected:"chartBrushSelected",chartGlobalCursorTaken:"chartGlobalCursorTaken",chartRendered:"chartRendered",chartFinished:"chartFinished"},exportAs:["echarts"],features:[U]})}}return r})(),Q=r=>({provide:X,useValue:r}),J=(()=>{class r{static forRoot(e){return{ngModule:r,providers:[Q(e)]}}static forChild(){return{ngModule:r}}static{this.\u0275fac=function(t){return new(t||r)}}static{this.\u0275mod=j({type:r})}static{this.\u0275inj=I({})}}return r})();var C=class r{constructor(i){this.http=i}memoryUrl="https://performance-tracker-service.onrender.com/api/memorymetrics/";cpuUrl="https://performance-tracker-service.onrender.com/api/cpumetrics/";getUsedMemory(){return this.http.get(`${this.memoryUrl}usedmemory`).pipe(g(i=>i.map((e,t)=>({index:t,value:e}))),y(i=>(console.error("Error fetching used memory data:",i),u(()=>i))))}getFreeMemory(){return this.http.get(`${this.memoryUrl}freememory`).pipe(g(i=>i.map((e,t)=>({index:t,value:e}))),y(i=>(console.error("Error fetching used memory data:",i),u(()=>i))))}getCpuUsage(){return this.http.get(`${this.cpuUrl}cpuusage`).pipe(g(i=>i.map((e,t)=>({index:t,value:e}))),y(i=>(console.error("Error fetching CPU usage data:",i),u(()=>i))))}static \u0275fac=function(e){return new(e||r)(P(H))};static \u0275prov=_({token:r,factory:r.\u0275fac,providedIn:"root"})};function ee(r,i){if(r&1&&(a(0,"option",7),c(1),o()),r&2){let e=i.$implicit;h("value",e.value),s(),N(" ",e.label," ")}}function te(r,i){r&1&&(a(0,"div"),c(1,"Loading Memory Chart..."),o())}function ie(r,i){if(r&1&&(a(0,"div"),c(1),o()),r&2){let e=m();s(),L(e.memoryError)}}function re(r,i){if(r&1&&(a(0,"div"),E(1,"div",8),o()),r&2){let e=m();s(),h("options",e.memoryChartOption)}}function ne(r,i){r&1&&(a(0,"div"),c(1,"Loading CPU Chart..."),o())}function ae(r,i){if(r&1&&(a(0,"div"),c(1),o()),r&2){let e=m();s(),L(e.cpuError)}}function oe(r,i){if(r&1&&(a(0,"div"),E(1,"div",8),o()),r&2){let e=m();s(),h("options",e.cpuChartOption)}}var K=class r{constructor(i){this.performanceService=i}memoryChartOption;cpuChartOption;memoryLoading=!0;cpuLoading=!0;memoryError=null;cpuError=null;memoryType="used";availableMemoryTypes=[{value:"used",label:"Used Memory"},{value:"free",label:"Free Memory"}];ngOnInit(){this.loadMemoryChartData(),this.loadCpuChartData()}ngAfterViewInit(){}onMemoryTypeChange(i){this.memoryType=i,this.loadMemoryChartData()}handleMemoryTypeChange(i){let t=i.target.value;t==="used"||t==="free"?this.onMemoryTypeChange(t):console.warn("Invalid memory type selected:",t)}loadMemoryChartData(){this.memoryLoading=!0,this.memoryError=null,(this.memoryType==="used"?this.performanceService.getUsedMemory():this.performanceService.getFreeMemory()).subscribe({next:e=>{let t=e.map(l=>l.index+1),n=e.map(l=>l.value);this.memoryChartOption={title:{text:this.memoryType==="used"?"Memory Usage Over Past 1 Minute":"Free Memory Over Past 1 Minute"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:t,name:"Time (seconds)"},yAxis:{type:"value",name:"Memory (MB)"},series:[{data:n,type:"line",smooth:!0}]},this.memoryLoading=!1},error:e=>{this.memoryError="Error loading memory chart data",console.error(e),this.memoryLoading=!1}})}loadCpuChartData(){this.cpuLoading=!0,this.cpuError=null,this.performanceService.getCpuUsage().subscribe({next:i=>{let e=i.map(n=>n.index+1),t=i.map(n=>n.value);this.cpuChartOption={title:{text:"CPU Usage Over Past 1 Minute"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:e,name:"Time (seconds)"},yAxis:{type:"value",name:"CPU Usage (%)"},series:[{data:t,type:"line",smooth:!0}]},this.cpuLoading=!1},error:i=>{this.cpuError="Error loading CPU chart data",console.error(i),this.cpuLoading=!1}})}static \u0275fac=function(e){return new(e||r)(d(C))};static \u0275cmp=G({type:r,selectors:[["app-dynamic-chart"]],decls:24,vars:8,consts:[[1,"chart-controls"],["for","memoryTypeSelect"],["id","memoryTypeSelect",3,"change","value"],[3,"value",4,"ngFor","ngForOf"],[3,"click"],[1,"chart-description"],[4,"ngIf"],[3,"value"],["echarts","",1,"chart-container",3,"options"]],template:function(e,t){e&1&&(a(0,"h2"),c(1,"Memory Usage"),o(),a(2,"div",0)(3,"label",1),c(4,"Select Memory Type: "),o(),a(5,"select",2),f("change",function(l){return t.handleMemoryTypeChange(l)}),v(6,ee,2,2,"option",3),o(),a(7,"button",4),f("click",function(){return t.loadMemoryChartData()}),c(8,"\u{1F5D8}"),o()(),a(9,"p",5),c(10,` This chart displays memory usage trends based on the selected memory type. Use it to monitor how system memory is being consumed over time and identify any potential memory bottlenecks.
`),o(),v(11,te,2,0,"div",6)(12,ie,2,1,"div",6)(13,re,2,1,"div",6),a(14,"h2"),c(15,"CPU Usage"),o(),a(16,"p",5),c(17,` This chart shows CPU utilization across different cores or processes. It helps visualize processing load and assists in diagnosing performance issues or system overload.
`),o(),a(18,"div",0)(19,"button",4),f("click",function(){return t.loadCpuChartData()}),c(20,"\u{1F5D8}"),o()(),v(21,ne,2,0,"div",6)(22,ae,2,1,"div",6)(23,oe,2,1,"div",6)),e&2&&(s(5),h("value",t.memoryType),s(),h("ngForOf",t.availableMemoryTypes),s(5),h("ngIf",t.memoryLoading),s(),h("ngIf",t.memoryError),s(),h("ngIf",!t.memoryLoading&&!t.memoryError),s(8),h("ngIf",t.cpuLoading),s(),h("ngIf",t.cpuError),s(),h("ngIf",!t.cpuLoading&&!t.cpuError))},dependencies:[$,V,B,J,q],styles:['.chart-container[_ngcontent-%COMP%]{width:100%;height:400px;margin-top:20px;margin-bottom:30px;border:2px solid #ddd;border-radius:8px;transition:box-shadow .3s ease}.chart-controls[_ngcontent-%COMP%]{margin:20px 0 16px;display:flex;align-items:center;gap:10px}.chart-description[_ngcontent-%COMP%]{font-size:15px;color:#555;margin:10px 0;line-height:1.5}h2[_ngcontent-%COMP%]{margin-top:30px;margin-bottom:8px;color:#222;font-weight:700;font-size:22px}.chart-container[_ngcontent-%COMP%]:hover{box-shadow:0 0 12px #007bff4d}button[_ngcontent-%COMP%]{padding:5px 10px;cursor:pointer;border-radius:4px;border:1px solid #ccc;background-color:#f0f0f0;height:32px}button[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}label[for=memoryTypeSelect][_ngcontent-%COMP%]{font-weight:600;font-size:16px;margin-right:10px;color:#333}#memoryTypeSelect[_ngcontent-%COMP%]{padding:6px 12px;font-size:14px;border-radius:4px;border:1px solid #ccc;transition:border-color .3s,box-shadow .3s;cursor:pointer}#memoryTypeSelect[_ngcontent-%COMP%]:hover, #memoryTypeSelect[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 5px #007bff80;outline:none}div[ng-reflect-ng-if="Loading..."][_ngcontent-%COMP%], div[ng-reflect-ng-if="[_ngcontent-%COMP%]{{ error }}"][_ngcontent-%COMP%]{font-size:16px;font-weight:700;color:#666;padding:16px;text-align:center}@media (max-width: 600px){.chart-container[_ngcontent-%COMP%]{height:300px}label[for=memoryTypeSelect][_ngcontent-%COMP%], #memoryTypeSelect[_ngcontent-%COMP%]{display:block;margin-bottom:10px}}']})};export{K as DynamicChartComponent};
